<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>bppfunctions.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>bppfunctions.h File Reference</h1><code>#include &lt;<a class="el" href="bptypes_8h_source.html">ServiceAPI/bptypes.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="bpdefinition_8h_source.html">ServiceAPI/bpdefinition.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="bpcfunctions_8h_source.html">ServiceAPI/bpcfunctions.h</a>&gt;</code><br/>

<p><a href="bppfunctions_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable_t</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a1a21d429714dbb09262cfa30b8bfaf68">BPP_CORELET_API_VERSION</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef const <br class="typebreak"/>
<a class="el" href="struct_b_p_corelet_definition__t.html">BPCoreletDefinition</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a1a7c21b6e4a97b84966c6493c34a91ec">BPPInitializePtr</a> )(const <a class="el" href="struct_b_p_c_function_table.html">BPCFunctionTable</a> *coreFunctionTable, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *parameterMap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aff56def7a847a68449b498ea9063ef6f">BPPShutdownPtr</a> )(void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a236b807f260a9df8b18e17814a72b0c5">BPPAllocatePtr</a> )(void **instance, unsigned int attachID, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *contextMap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#ad44819fec8daa1ee336a74929b8c201a">BPPDestroyPtr</a> )(void *instance)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aed2ac6dc58a6ed8d826257584d07b192">BPPInvokePtr</a> )(void *instance, const char *functionName, unsigned int tid, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *arguments)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef const <br class="typebreak"/>
<a class="el" href="struct_b_p_corelet_definition__t.html">BPCoreletDefinition</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aa9cbc609ce341cc2d94a1a91a5f3bf0b">BPPAttachPtr</a> )(unsigned int attachID, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *parameterMap)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#ade163695cdaff7faa85bd3a056da9c00">BPPDetachPtr</a> )(unsigned int attachID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a1d3dd8d96d16854d423142f9bebffe98">BPPFunctionTable</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a79b804600beac147fb6389b800aec293">BPPGetEntryPoints</a> (void)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a1a21d429714dbb09262cfa30b8bfaf68"></a><!-- doxytag: member="bppfunctions.h::BPP_CORELET_API_VERSION" ref="a1a21d429714dbb09262cfa30b8bfaf68" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPP_CORELET_API_VERSION&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a236b807f260a9df8b18e17814a72b0c5"></a><!-- doxytag: member="bppfunctions.h::BPPAllocatePtr" ref="a236b807f260a9df8b18e17814a72b0c5" args=")(void **instance, unsigned int attachID, const BPElement *contextMap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="bppfunctions_8h.html#a236b807f260a9df8b18e17814a72b0c5">BPPAllocatePtr</a>)(void **instance, unsigned int attachID, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *contextMap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocate a new service instance.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>A void pointer that will be passed back to subsequent calls into this instance. This is an output parameter that services may use to store instance specific context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attachID</em>&nbsp;</td><td>The ID of the attachment this is associated with for provider services (set in BPPAttach call), for standalone services, always zero and may be ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contextMap</em>&nbsp;</td><td>A map containing session specific context. 'uri' is a string containing a URI of the current client. This is usually the full URL to the webpage that is interacting with browserplus. In the case of a native local application interacting with browserplus it should be a URI with a method of 'bpclient' (i.e. bpclient://CLIENTIDENTIFIER'). 'corelet_dir' DEPRECATED, use service_dir instead. 'service_dir' is an absolute path to the directory containing the files distributed with the service. 'data_dir' is a absolute path to where the service should store any data that needs to persist. 'temp_dir' is a directory that may be used for temporary data. it will be unique for every instance, and will be purged when the instance is deallocated. 'locale' The locale of the end user to which strings, if any, should be localized. 'userAgent' The client user-agent string. 'clientPid' The process ID of the client.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>zero on success, non-zero on failure </dd></dl>

</div>
</div>
<a class="anchor" id="aa9cbc609ce341cc2d94a1a91a5f3bf0b"></a><!-- doxytag: member="bppfunctions.h::BPPAttachPtr" ref="aa9cbc609ce341cc2d94a1a91a5f3bf0b" args=")(unsigned int attachID, const BPElement *parameterMap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const <a class="el" href="struct_b_p_corelet_definition__t.html">BPCoreletDefinition</a>*(* <a class="el" href="bppfunctions_8h.html#aa9cbc609ce341cc2d94a1a91a5f3bf0b">BPPAttachPtr</a>)(unsigned int attachID, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *parameterMap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The "attach" function supports interpreter services. These are services which can be used by other services. The primary types of services that will be interested in this functionality are high level language interpretation services which allow the authoring of services in non-compiled languages.</p>
<p>For most services Attach and Detach may be NULL which indicates that the service may not be "used" by other services.</p>
<p>Attach is called after BPPInitialize at the time the dependant service is itself initialize. Multiple dependant services may use the same provider service, and the provider service may also expose functions directly. Multiple attached dependant services may be disambiguated using the "attachID". At the time an instance of a attached service is instantiated, the attachID is passed in.</p>
<p>The parameters map contains a set of parameters which describe the dependant service. These parameters are both set by BrowserPlus, and extracted from the manifest of the dependant service.</p>
<p>The returned service definition describes the interface of the dependent service. This will likely be dynamically allocated memory, which should not be freed until detach is called</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>this is an exception to the ServiceAPI's memory contract, and will be fixed in a later version of the ServiceAPI </dd></dl>

</div>
</div>
<a class="anchor" id="ad44819fec8daa1ee336a74929b8c201a"></a><!-- doxytag: member="bppfunctions.h::BPPDestroyPtr" ref="ad44819fec8daa1ee336a74929b8c201a" args=")(void *instance)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#ad44819fec8daa1ee336a74929b8c201a">BPPDestroyPtr</a>)(void *instance)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy a service instance allocated with BPPAllocate. </p>

</div>
</div>
<a class="anchor" id="ade163695cdaff7faa85bd3a056da9c00"></a><!-- doxytag: member="bppfunctions.h::BPPDetachPtr" ref="ade163695cdaff7faa85bd3a056da9c00" args=")(unsigned int attachID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#ade163695cdaff7faa85bd3a056da9c00">BPPDetachPtr</a>)(unsigned int attachID)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>At the time the last instance of a dependant service is deleted, detach is called. </p>

</div>
</div>
<a class="anchor" id="a1d3dd8d96d16854d423142f9bebffe98"></a><!-- doxytag: member="bppfunctions.h::BPPFunctionTable" ref="a1d3dd8d96d16854d423142f9bebffe98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable_t</a>  <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1a7c21b6e4a97b84966c6493c34a91ec"></a><!-- doxytag: member="bppfunctions.h::BPPInitializePtr" ref="a1a7c21b6e4a97b84966c6493c34a91ec" args=")(const BPCFunctionTable *coreFunctionTable, const BPElement *parameterMap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const <a class="el" href="struct_b_p_corelet_definition__t.html">BPCoreletDefinition</a>*(* <a class="el" href="bppfunctions_8h.html#a1a7c21b6e4a97b84966c6493c34a91ec">BPPInitializePtr</a>)(const <a class="el" href="struct_b_p_c_function_table.html">BPCFunctionTable</a> *coreFunctionTable, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *parameterMap)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>***** BEGIN LICENSE BLOCK ***** The contents of this file are subject to the Mozilla Public License Version 1.1 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at <a href="http://www.mozilla.org/MPL/">http://www.mozilla.org/MPL/</a></p>
<p>Software distributed under the License is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language governing rights and limitations under the License.</p>
<p>The Original Code is BrowserPlus (tm).</p>
<p>The Initial Developer of the Original Code is Yahoo!. Portions created by Yahoo! are Copyright (C) 2006-2009 Yahoo!. All Rights Reserved.</p>
<p>Contributor(s): ***** END LICENSE BLOCK ***** Written by Lloyd Hilaiel, on or around Fri May 18 17:06:54 MDT 2007</p>
<p>Overview:</p>
<p>Functions that must be implemented by the service are prefaced with BPP and are located in this file. Initialize the service, called once at service load time. the pointer passed in points to a structure of points to BPC functions that the service may call through into BPCore. </p>

</div>
</div>
<a class="anchor" id="aed2ac6dc58a6ed8d826257584d07b192"></a><!-- doxytag: member="bppfunctions.h::BPPInvokePtr" ref="aed2ac6dc58a6ed8d826257584d07b192" args=")(void *instance, const char *functionName, unsigned int tid, const BPElement *arguments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#aed2ac6dc58a6ed8d826257584d07b192">BPPInvokePtr</a>)(void *instance, const char *functionName, unsigned int tid, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *arguments)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>All callable functions exposed by the service are invoked by BrowserPlus by calling the invoke function and passing as a parameter the name of the function being invoked.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>The same instance pointer that the service returned in the BPPAllocate call. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>functionName</em>&nbsp;</td><td>The name of the function being invoked </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>The transaction id of this function invocation. Should be passed by the service to BPCPostResultsFuncPtr or BPCPostErrorFuncPtr </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arguments</em>&nbsp;</td><td>The validated arguments to the function. The service is guaranteed that all defined arguments to the function from the function description structure have been checked, and that no unsupported arguments are present, nor are required arguments missing. This is always a BPTMap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aff56def7a847a68449b498ea9063ef6f"></a><!-- doxytag: member="bppfunctions.h::BPPShutdownPtr" ref="aff56def7a847a68449b498ea9063ef6f" args=")(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#aff56def7a847a68449b498ea9063ef6f">BPPShutdownPtr</a>)(void)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>shut down the service. Called once at service unload time, all allocated instances will have been deleted by the time this function is called. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a79b804600beac147fb6389b800aec293"></a><!-- doxytag: member="bppfunctions.h::BPPGetEntryPoints" ref="a79b804600beac147fb6389b800aec293" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable</a>* BPPGetEntryPoints </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The single entry point into the plugin which attains a BPPFunctionTable containing the version. Having a single symbol which is sought in the plugin interface allows the service author to strip all other symbols. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Thu Nov 12 19:06:37 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
